import{_ as D}from"./ValaxyMain.vue_vue_type_style_index_0_lang.Cvj5SFzK.js";import"./chunks/@vueuse/motion.CZ-PQs79.js";import{e as f,u as b,a as T}from"./chunks/vue-router.8hGbrpip.js";import{aa as g,ab as R,al as t,ag as o,af as l,ae as v,ai as e,O as W,a1 as k}from"./framework.DzSIVGYh.js";import"./app.N3ktDmMa.js";import"./chunks/dayjs.BdcnXKr1.js";import"./chunks/vue-i18n.BAMvtJBo.js";import"./chunks/pinia.CAyrp8sd.js";/* empty css                    */import"./chunks/nprogress.B6x19dEb.js";import"./YunComment.vue_vue_type_style_index_0_lang.CwZAY1Qk.js";import"./index.C5okkQwF.js";import"./YunPageHeader.vue_vue_type_script_setup_true_lang.8uh5D9wM.js";import"./post.DgszSqCH.js";const M=f("/posts/course-GPU-TDR",async a=>JSON.parse('{"title":"论如何修改WDDM TDR","description":"","frontmatter":{"title":"论如何修改WDDM TDR","date":"2024-10-27","categories":"技术教程","tags":["Windows","GPU","WDDM","WDDM TDR"],"excerpt_type":"html"},"headers":[],"relativePath":"pages/posts/course-GPU-TDR.md","lastUpdated":1757763685000}'),{lazy:(a,s)=>a.name===s.name}),B={__name:"course-GPU-TDR",setup(a,{expose:s}){const{data:d}=M(),u=T(),p=b(),i=Object.assign(p.meta.frontmatter||{},d.value?.frontmatter||{});return u.currentRoute.value.data=d.value,k("valaxy:frontmatter",i),globalThis.$frontmatter=i,s({frontmatter:{title:"论如何修改WDDM TDR",date:"2024-10-27",categories:"技术教程",tags:["Windows","GPU","WDDM","WDDM TDR"],excerpt_type:"html"}}),(n,r)=>{const m=D;return R(),g(m,{frontmatter:W(i)},{"main-content-md":t(()=>[r[0]||(r[0]=l("p",null,[e("近期在尝试使用 "),l("code",null,"Stable Diffusion"),e(" 进行AI绘画，")],-1)),r[1]||(r[1]=l("p",null,"但由于运行环境的 显卡性能不足 & TDR ，造成图片无法生成…",-1)),r[2]||(r[2]=l("blockquote",null,[l("p",null,[e("本文中提到的TDR为 "),l("code",null,"WDDM"),e("（全称 "),l("code",null,"Windows Display Driver Model"),e(" ，即 "),l("code",null,"Windows显示驱动程序模型"),e(" ） 下的功能")])],-1)),v(" more "),r[3]||(r[3]=l("h2",{id:"正文",tabindex:"-1"},[e("正文 "),l("a",{class:"header-anchor",href:"#正文","aria-label":'Permalink to "正文"'},"​")],-1)),r[4]||(r[4]=l("h3",{id:"什么是-tdr-超时检测和恢复",tabindex:"-1"},[e("什么是 TDR（超时检测和恢复） "),l("a",{class:"header-anchor",href:"#什么是-tdr-超时检测和恢复","aria-label":'Permalink to "什么是 TDR（超时检测和恢复）"'},"​")],-1)),r[5]||(r[5]=l("p",null,[e("全称 "),l("code",null,"Timeout Detection and Recovery")],-1)),r[6]||(r[6]=l("p",null,[e("在 "),l("code",null,"Windows Vista"),e(" 之后的版本会检查显卡不响应的情况，并通过重置显卡，保证操作系统继续正常运行。")],-1)),r[7]||(r[7]=l("p",null,"所以操作系统在一定时间内没有收到显卡的响应，便会触发重置。",-1)),r[8]||(r[8]=l("blockquote",null,[l("p",null,[e("Tips："),l("br"),e(" (1) 响应超时的默认时间是2秒."),l("br"),e(" (2) TDR 特性推出以前，遇到显卡未响应只能通过重启解决。而如今一旦遇到显卡问题你将会看到以下内容"),l("br"),e(" Display driver stopped responding and has recovered"),l("br"),e(" （显卡驱动程序已停止响应，并且已恢复）")])],-1)),r[9]||(r[9]=l("p",null,"该特性对于一般用户而言是非常有用。",-1)),r[10]||(r[10]=l("p",null,"但对于开发、调试GPU并行计算，使用某些使用GPU运算的软件，默认的 TDR 太短了…",-1)),r[11]||(r[11]=l("h3",{id:"如何修改tdr",tabindex:"-1"},[e("如何修改TDR "),l("a",{class:"header-anchor",href:"#如何修改tdr","aria-label":'Permalink to "如何修改TDR"'},"​")],-1)),r[12]||(r[12]=l("h4",{id:"方法一-修改注册表-通用方法",tabindex:"-1"},[e("方法一: 修改注册表（通用方法） "),l("a",{class:"header-anchor",href:"#方法一-修改注册表-通用方法","aria-label":'Permalink to "方法一: 修改注册表（通用方法）"'},"​")],-1)),r[13]||(r[13]=l("p",null,[e("按下 "),l("code",null,"Win"),e(" + "),l("code",null,"R"),e(" 键打开运行窗口")],-1)),r[14]||(r[14]=l("p",null,[e("输入 "),l("code",null,"regedit"),e(" 并回车，若遇到 "),l("a",{href:"https://learn.microsoft.com/zh-cn/windows/security/application-security/application-control/user-account-control/",target:"_blank",rel:"noreferrer"},"UAC（用户帐户控制概述）"),e(" ，请选择确认")],-1)),r[15]||(r[15]=l("p",null,[e("找到 "),l("code",null,"Computer\\HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Control\\GraphicsDrivers")],-1)),r[16]||(r[16]=l("p",null,[e("修改 "),l("code",null,"TdrDelay"),e(" 的数值，将进制设为十进制，修改数值（例如60）")],-1)),r[17]||(r[17]=l("blockquote",null,[l("p",null,[e("Tips:"),l("br"),e(" 若不存在 TdrDelay 的注册表项，则需在 "),l("code",null,"GraphicsDrivers"),e(" 下通过 "),l("code",null,"DWORD (32 位)值"),e(" 创建，并命名为 "),l("code",null,"TdrDelay")])],-1)),r[18]||(r[18]=l("p",null,"最后重启电脑就可以啦~",-1)),r[19]||(r[19]=l("h4",{id:"方法二-利用nsight修改-仅限于nvidia显卡",tabindex:"-1"},[e("方法二: 利用Nsight修改（仅限于NVIDIA显卡） "),l("a",{class:"header-anchor",href:"#方法二-利用nsight修改-仅限于nvidia显卡","aria-label":'Permalink to "方法二: 利用Nsight修改（仅限于NVIDIA显卡）"'},"​")],-1)),r[20]||(r[20]=l("p",null,[e("通过 "),l("a",{href:"https://developer.nvidia.com/nsight-graphics",target:"_blank",rel:"noreferrer"},"NVIDIA Nsight Graphics | NVIDIA Developer"),e(" 下载 "),l("code",null,"Nsight")],-1)),r[21]||(r[21]=l("blockquote",null,[l("p",null,[e("Tips:"),l("br"),e(" (1) 没记错的话似乎可以在安装显卡驱动时勾选 Nsight …(?)"),l("br"),e(" (2) 启动前请确保是以管理员身份启动 Nsight ！")])],-1)),r[22]||(r[22]=l("p",null,[e("安装完成后，在任务栏图标中找到 Nsight ，右键选择 "),l("code",null,"Options")],-1)),r[23]||(r[23]=l("p",null,[e("在左侧的侧边栏中选择 "),l("code",null,"General")],-1)),r[24]||(r[24]=l("p",null,[e("然后在 "),l("code",null,"Microsoft Display Driver"),e(" 一项中修改 "),l("code",null,"WDDM TDR Delay"),e(" 或 "),l("code",null,"WDDM TDR enabled"),e(" （任选其一即可）")],-1)),r[25]||(r[25]=l("blockquote",null,[l("p",null,[l("code",null,"WDDM TDR Delay"),e(" 的数值修改开参考上方的例子（60）"),l("br"),l("code",null,"WDDM TDR enabled"),e(" 修改为 "),l("code",null,"False"),e(" 即可")])],-1)),r[26]||(r[26]=l("p",null,"最后重启电脑就完成啦~",-1)),r[27]||(r[27]=l("h2",{id:"参考资料",tabindex:"-1"},[e("参考资料 "),l("a",{class:"header-anchor",href:"#参考资料","aria-label":'Permalink to "参考资料"'},"​")],-1)),r[28]||(r[28]=l("ul",null,[l("li",null,[l("p",null,[l("a",{href:"https://baike.baidu.com/item/WDDM/1408199",target:"_blank",rel:"noreferrer"},"WDDM - 百度百科")])]),l("li",null,[l("p",null,[l("a",{href:"https://learn.microsoft.com/zh-cn/windows-hardware/drivers/display/timeout-detection-and-recovery",target:"_blank",rel:"noreferrer"},"超时检测和恢复 (TDR) - Windows drivers | Microsoft Learn")])]),l("li",null,[l("p",null,[l("a",{href:"https://zhuanlan.zhihu.com/p/38141415",target:"_blank",rel:"noreferrer"},"什么是 TDR Issue 及修改方法 - 知乎")])])],-1)),r[29]||(r[29]=l("h2",{id:"后记",tabindex:"-1"},[e("后记 "),l("a",{class:"header-anchor",href:"#后记","aria-label":'Permalink to "后记"'},"​")],-1)),r[30]||(r[30]=l("p",null,"感觉若是只需要 AI绘画 ，不如选择性能好的显卡…",-1)),r[31]||(r[31]=l("p",null,"毕竟性能不足就会造成生成时间延长…（悲）",-1)),r[32]||(r[32]=l("p",null,"当然，租个显卡云也不是不可，就是价钱…",-1)),r[33]||(r[33]=l("p",null,"说起来似乎可以白嫖谷歌云…（？）",-1))]),"main-header":t(()=>[o(n.$slots,"main-header")]),"main-header-after":t(()=>[o(n.$slots,"main-header-after")]),"main-nav":t(()=>[o(n.$slots,"main-nav")]),"main-content-before":t(()=>[o(n.$slots,"main-content-before")]),"main-content":t(()=>[o(n.$slots,"main-content")]),"main-content-after":t(()=>[o(n.$slots,"main-content-after")]),"main-nav-before":t(()=>[o(n.$slots,"main-nav-before")]),"main-nav-after":t(()=>[o(n.$slots,"main-nav-after")]),comment:t(()=>[o(n.$slots,"comment")]),footer:t(()=>[o(n.$slots,"footer")]),aside:t(()=>[o(n.$slots,"aside")]),"aside-custom":t(()=>[o(n.$slots,"aside-custom")]),default:t(()=>[o(n.$slots,"default")]),_:3},8,["frontmatter"])}}};export{B as default,M as usePageData};
